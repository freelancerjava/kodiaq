{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if ('value' in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _get = function get(_x, _x2, _x3) {\n  var _again = true;\n\n  _function: while (_again) {\n    var object = _x,\n        property = _x2,\n        receiver = _x3;\n    _again = false;\n    if (object === null) object = Function.prototype;\n    var desc = Object.getOwnPropertyDescriptor(object, property);\n\n    if (desc === undefined) {\n      var parent = Object.getPrototypeOf(object);\n\n      if (parent === null) {\n        return undefined;\n      } else {\n        _x = parent;\n        _x2 = property;\n        _x3 = receiver;\n        _again = true;\n        desc = parent = undefined;\n        continue _function;\n      }\n    } else if ('value' in desc) {\n      return desc.value;\n    } else {\n      var getter = desc.get;\n\n      if (getter === undefined) {\n        return undefined;\n      }\n\n      return getter.call(receiver);\n    }\n  }\n};\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    'default': obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError('Cannot call a class as a function');\n  }\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== 'function' && superClass !== null) {\n    throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _aphroditeNoImportant = require('aphrodite/no-important');\n\nvar _reactScrolllock = require('react-scrolllock');\n\nvar _reactScrolllock2 = _interopRequireDefault(_reactScrolllock);\n\nvar _theme = require('./theme');\n\nvar _theme2 = _interopRequireDefault(_theme);\n\nvar _componentsArrow = require('./components/Arrow');\n\nvar _componentsArrow2 = _interopRequireDefault(_componentsArrow);\n\nvar _componentsContainer = require('./components/Container');\n\nvar _componentsContainer2 = _interopRequireDefault(_componentsContainer);\n\nvar _componentsFooter = require('./components/Footer');\n\nvar _componentsFooter2 = _interopRequireDefault(_componentsFooter);\n\nvar _componentsHeader = require('./components/Header');\n\nvar _componentsHeader2 = _interopRequireDefault(_componentsHeader);\n\nvar _componentsPaginatedThumbnails = require('./components/PaginatedThumbnails');\n\nvar _componentsPaginatedThumbnails2 = _interopRequireDefault(_componentsPaginatedThumbnails);\n\nvar _componentsPortal = require('./components/Portal');\n\nvar _componentsPortal2 = _interopRequireDefault(_componentsPortal);\n\nvar _utils = require('./utils');\n\nvar Lightbox = function (_Component) {\n  _inherits(Lightbox, _Component);\n\n  function Lightbox(props) {\n    _classCallCheck(this, Lightbox);\n\n    _get(Object.getPrototypeOf(Lightbox.prototype), 'constructor', this).call(this, props);\n\n    this.theme = (0, _utils.deepMerge)(_theme2['default'], props.theme);\n\n    _utils.bindFunctions.call(this, ['gotoNext', 'gotoPrev', 'closeBackdrop', 'handleKeyboardInput']);\n  }\n\n  _createClass(Lightbox, [{\n    key: 'getChildContext',\n    value: function getChildContext() {\n      return {\n        theme: this.theme\n      };\n    }\n  }, {\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      if (this.props.isOpen && this.props.enableKeyboardInput) {\n        window.addEventListener('keydown', this.handleKeyboardInput);\n      }\n    }\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      if (!_utils.canUseDom) return; // preload images\n\n      if (nextProps.items.type == 'images') {\n        if (nextProps.preloadNextImage) {\n          var currentIndex = this.props.currentItem;\n          var nextIndex = nextProps.currentItem + 1;\n          var prevIndex = nextProps.currentItem - 1;\n          var preloadIndex = undefined;\n\n          if (currentIndex && nextProps.currentItem > currentIndex) {\n            preloadIndex = nextIndex;\n          } else if (currentIndex && nextProps.currentItem < currentIndex) {\n            preloadIndex = prevIndex;\n          } // if we know the user's direction just get one image\n          // otherwise, to be safe, we need to grab one in each direction\n\n\n          if (preloadIndex) {\n            this.preloadImage(preloadIndex);\n          } else {\n            this.preloadImage(prevIndex);\n            this.preloadImage(nextIndex);\n          }\n        }\n      } // add/remove event listeners\n\n\n      if (!this.props.isOpen && nextProps.isOpen && nextProps.enableKeyboardInput) {\n        window.addEventListener('keydown', this.handleKeyboardInput);\n      }\n\n      if (!nextProps.isOpen && nextProps.enableKeyboardInput) {\n        window.removeEventListener('keydown', this.handleKeyboardInput);\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      if (this.props.enableKeyboardInput) {\n        window.removeEventListener('keydown', this.handleKeyboardInput);\n      }\n    } // ==============================\n    // METHODS\n    // ==============================\n\n  }, {\n    key: 'preloadImage',\n    value: function preloadImage(idx) {\n      var image = this.props.items.items[idx];\n      if (!image) return;\n      var img = new Image();\n      img.src = image.src;\n\n      if (image.srcset) {\n        img.srcset = image.srcset.join();\n      }\n    }\n  }, {\n    key: 'gotoNext',\n    value: function gotoNext(event) {\n      if (this.props.currentItem === this.props.items.items.length - 1) return;\n\n      if (event) {\n        event.preventDefault();\n        event.stopPropagation();\n      }\n\n      this.props.onClickNext();\n    }\n  }, {\n    key: 'gotoPrev',\n    value: function gotoPrev(event) {\n      if (this.props.currentItem === 0) return;\n\n      if (event) {\n        event.preventDefault();\n        event.stopPropagation();\n      }\n\n      this.props.onClickPrev();\n    }\n  }, {\n    key: 'closeBackdrop',\n    value: function closeBackdrop(event) {\n      if (event.target.id === 'lightboxBackdrop') {\n        this.props.onClose();\n      }\n    }\n  }, {\n    key: 'handleKeyboardInput',\n    value: function handleKeyboardInput(event) {\n      if (event.keyCode === 37) {\n        // left\n        this.gotoPrev(event);\n        return true;\n      } else if (event.keyCode === 39) {\n        // right\n        this.gotoNext(event);\n        return true;\n      } else if (event.keyCode === 27) {\n        // esc\n        this.props.onClose();\n        return true;\n      }\n\n      return false;\n    } // ==============================\n    // RENDERERS\n    // ==============================\n\n  }, {\n    key: 'renderArrowPrev',\n    value: function renderArrowPrev() {\n      if (this.props.currentItem === 0) return null;\n      return _react2['default'].createElement(_componentsArrow2['default'], {\n        direction: 'left',\n        icon: 'arrowLeft',\n        onClick: this.gotoPrev,\n        title: this.props.leftArrowTitle,\n        type: 'button'\n      });\n    }\n  }, {\n    key: 'renderArrowNext',\n    value: function renderArrowNext() {\n      if (this.props.currentItem === this.props.items.items.length - 1) return null;\n      return _react2['default'].createElement(_componentsArrow2['default'], {\n        direction: 'right',\n        icon: 'arrowRight',\n        onClick: this.gotoNext,\n        title: this.props.rightArrowTitle,\n        type: 'button'\n      });\n    }\n  }, {\n    key: 'renderDialog',\n    value: function renderDialog() {\n      var _props = this.props;\n      var backdropClosesModal = _props.backdropClosesModal;\n      var customControls = _props.customControls;\n      var isOpen = _props.isOpen;\n      var onClose = _props.onClose;\n      var showCloseButton = _props.showCloseButton;\n      var showThumbnails = _props.showThumbnails;\n      var width = _props.width;\n      if (!isOpen) return _react2['default'].createElement('span', {\n        key: 'closed'\n      });\n      var offsetThumbnails = 0;\n\n      if (showThumbnails) {\n        offsetThumbnails = this.theme.thumbnail.size + this.theme.container.gutter.vertical;\n      }\n\n      return _react2['default'].createElement(_componentsContainer2['default'], {\n        key: 'open',\n        onClick: !!backdropClosesModal && this.closeBackdrop,\n        onTouchEnd: !!backdropClosesModal && this.closeBackdrop\n      }, _react2['default'].createElement('div', {\n        className: (0, _aphroditeNoImportant.css)(classes.content),\n        style: {\n          marginBottom: offsetThumbnails,\n          maxWidth: width\n        }\n      }, _react2['default'].createElement(_componentsHeader2['default'], {\n        customControls: customControls,\n        onClose: onClose,\n        showCloseButton: showCloseButton,\n        closeButtonTitle: this.props.closeButtonTitle\n      }), this.renderItems()), this.renderThumbnails(), this.renderArrowPrev(), this.renderArrowNext(), _react2['default'].createElement(_reactScrolllock2['default'], null));\n    }\n  }, {\n    key: 'renderItems',\n    value: function renderItems() {\n      var _props2 = this.props;\n      var currentItem = _props2.currentItem;\n      var items = _props2.items;\n      var imageCountSeparator = _props2.imageCountSeparator;\n      var onClickImage = _props2.onClickImage;\n      var showImageCount = _props2.showImageCount;\n      var showThumbnails = _props2.showThumbnails;\n      if (!items.items || !items.items.length) return null;\n\n      if (items.type == 'images') {\n        var images = items.items;\n        var image = images[currentItem];\n        var srcset = undefined;\n        var sizes = undefined;\n\n        if (image.srcset) {\n          srcset = image.srcset.join();\n          sizes = '100vw';\n        }\n\n        var thumbnailsSize = showThumbnails ? this.theme.thumbnail.size : 0;\n        var heightOffset = this.theme.header.height + this.theme.footer.height + thumbnailsSize + this.theme.container.gutter.vertical + 'px';\n        return _react2['default'].createElement('figure', {\n          className: (0, _aphroditeNoImportant.css)(classes.figure)\n        }, _react2['default'].createElement('img', {\n          className: (0, _aphroditeNoImportant.css)(classes.image),\n          onClick: !!onClickImage && onClickImage,\n          sizes: sizes,\n          alt: image.alt,\n          src: image.src,\n          srcSet: srcset,\n          style: {\n            cursor: this.props.onClickImage ? 'pointer' : 'auto',\n            maxHeight: 'calc(100vh - ' + heightOffset + ')'\n          }\n        }), _react2['default'].createElement(_componentsFooter2['default'], {\n          caption: image.caption,\n          countCurrent: currentItem + 1,\n          countSeparator: imageCountSeparator,\n          countTotal: images.length,\n          showCount: showImageCount\n        }));\n      } else if (items.type == 'texts') {\n        var texts = items.items;\n        var text = texts[currentItem];\n        return _react2['default'].createElement('article', {\n          className: (0, _aphroditeNoImportant.css)(classes.figure)\n        }, _react2['default'].createElement('p', {\n          className: 'text_content'\n        }, ' ', text, ' '));\n      } else {\n        var videos = items.items;\n        var videoId = videos[currentItem];\n        var width = Math.min(window.innerWidth - window.innerWidth / 5, 800);\n        return _react2['default'].createElement('div', {\n          key: videoId,\n          id: videoId,\n          className: 'video-item'\n        }, _react2['default'].createElement('iframe', {\n          style: {\n            border: 'none'\n          },\n          id: videoId,\n          type: 'text/html',\n          width: width,\n          height: 3 * width / 4,\n          src: '//www.youtube.com/embed/' + videoId + '?autoplay=1&origin=http://antoniocamposruiz.com'\n        }));\n      }\n    }\n  }, {\n    key: 'renderThumbnails',\n    value: function renderThumbnails() {\n      var _props3 = this.props;\n      var items = _props3.items;\n      var currentItem = _props3.currentItem;\n      var onClickThumbnail = _props3.onClickThumbnail;\n      var showThumbnails = _props3.showThumbnails;\n      var thumbnailOffset = _props3.thumbnailOffset;\n      if (!showThumbnails) return;\n      return _react2['default'].createElement(_componentsPaginatedThumbnails2['default'], {\n        currentImage: currentItem,\n        images: items.items,\n        offset: thumbnailOffset,\n        onClickThumbnail: onClickThumbnail\n      });\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      return _react2['default'].createElement(_componentsPortal2['default'], null, this.renderDialog());\n    }\n  }]);\n\n  return Lightbox;\n}(_react.Component);\n\nLightbox.propTypes = {\n  backdropClosesModal: _propTypes2['default'].bool,\n  closeButtonTitle: _propTypes2['default'].string,\n  currentItem: _propTypes2['default'].number,\n  customControls: _propTypes2['default'].arrayOf(_propTypes2['default'].node),\n  enableKeyboardInput: _propTypes2['default'].bool,\n  imageCountSeparator: _propTypes2['default'].string,\n  items: _propTypes2['default'].shape({\n    type: _propTypes2['default'].oneOf(['images', 'texts', 'videos']).isRequired,\n    items: _propTypes2['default'].array\n  }).isRequired,\n  isOpen: _propTypes2['default'].bool,\n  leftArrowTitle: _propTypes2['default'].string,\n  onClickImage: _propTypes2['default'].func,\n  onClickNext: _propTypes2['default'].func,\n  onClickPrev: _propTypes2['default'].func,\n  onClose: _propTypes2['default'].func.isRequired,\n  preloadNextImage: _propTypes2['default'].bool,\n  rightArrowTitle: _propTypes2['default'].string,\n  showCloseButton: _propTypes2['default'].bool,\n  showImageCount: _propTypes2['default'].bool,\n  showThumbnails: _propTypes2['default'].bool,\n  theme: _propTypes2['default'].object,\n  thumbnailOffset: _propTypes2['default'].number,\n  width: _propTypes2['default'].number\n};\nLightbox.defaultProps = {\n  closeButtonTitle: 'Close (Esc)',\n  currentItem: 0,\n  enableKeyboardInput: true,\n  imageCountSeparator: ' of ',\n  leftArrowTitle: 'Previous (Left arrow key)',\n  onClickShowNextImage: true,\n  preloadNextImage: true,\n  rightArrowTitle: 'Next (Right arrow key)',\n  showCloseButton: true,\n  showImageCount: true,\n  theme: {},\n  thumbnailOffset: 2,\n  width: 1024\n};\nLightbox.childContextTypes = {\n  theme: _propTypes2['default'].object.isRequired\n};\n\nvar classes = _aphroditeNoImportant.StyleSheet.create({\n  content: {\n    position: 'relative'\n  },\n  figure: {\n    margin: 0\n  },\n  // remove browser default\n  image: {\n    display: 'block',\n    // removes browser default gutter\n    height: 'auto',\n    margin: '0 auto',\n    // maintain center on very short screens OR very narrow image\n    maxWidth: '100%',\n    // disable user select\n    WebkitTouchCallout: 'none',\n    userSelect: 'none'\n  }\n});\n\nexports['default'] = Lightbox;\nmodule.exports = exports['default'];\n/*\nRe-implement when react warning \"unknown props\"\nhttps://fb.me/react-unknown-prop is resolved\n<Swipeable onSwipedLeft={this.gotoNext} onSwipedRight={this.gotoPrev} />\n*/","map":null,"metadata":{},"sourceType":"script"}