function ctaClick(n){var u="Cta",t=n.currentTarget,i=t.datasetCompatible()["label"+u],f,r;i||(i=$.trim(n.currentTarget.text));f=function(){saveDataLayer(17,[],"CTA",t.datasetCompatible()["action"+u],i,null,null)};r=null;$(t).hasClass("layer-link")||(r=$(t).attr("href"));f(r)}function getPromotionData(n,t){var i=n.currentTarget?$(n.currentTarget):$(n),r="Promo",u=i.data("name"+r)?i.data("name"+r):i.data("action"+r),f=i.data("position"+r);return u&&f?getEcommerceData(u,f,null,t):null}function getEcommerceData(n,t,i,r){return i||(i={ecommerce:{}},i.ecommerce[r]={promotions:[]}),i.ecommerce[r].promotions.push({name:n,position:t}),i}function promotionClick(n){var t=n.currentTarget?$(n.currentTarget):$(n),i="Promo",r=t.attr("target"),u=function(u){var f=getPromotionData(n,"promoClick");saveDataLayer(3,f,"Promotion",t.data("action"+i),"Promotion click",null,null,u,r)};u(t.attr("href"))}function createPageViewData(){var n={event:"pageview","importer.BID":""+$(".k2ng-page").data("contextBid")+"","dealer.DealerID":""+$(".k2ng-page").data("contextDealerid")+"","page.Group":"Website","page.Name":$("title").text(),"page.LanguageVersion":$("html").attr("lang"),"page.ResponsiveLayout":findBootstrapEnvironment(),"page.Orientation":getOrientation()};return $("div[data-implementation='ImporterNotFound404Page']").length&&(n["Document.Title"]="Page not found",n.matrixId="23"),n=gtmEnrichModelData(n),$("div[data-implementation='ImporterModelFamilyPage']").length&&(n["car.Model"]=""+$(".k2ng-page").data("contextMbv")+""),n}function promotionImpressions(){for(var t,u=createPageViewData(),r=gtmTracking.getPromoImpressions(),n=null,i=0;i<r.length;i++)t=$(r[i]),gtmTracking.isHomeTileDeniedToTrack(t)||(n=getEcommerceData(t.data("actionPromo"),t.data("positionPromo"),n,"promoView"));return n?(saveDataLayer(2,$.extend(u,n)),!0):!1}function promotionImpression(n){var f,r,t,i,u;if(n=$(n),n.hasClass("gtm-promotion")?n.length===3&&(n=$(n[1])):n=n.find(".gtm-promotion"),f=createPageViewData(),n.data("countPromo")&&n.data("countPromo")===n.closest(".sa-promotion").children().length){for(r=n.closest(".sa-promotion").children(),t=null,i=0;i<r.length;i++)u=$(r[i]).find(".gtm-promotion"),t=getEcommerceData(u.data("actionPromo"),u.data("positionPromo"),t,"promoView");if(t)return saveDataLayer(2,$.extend(f,t)),!0}return!1}function gtmPageView(){var n=createPageViewData();saveDataLayer(1,n)}function collectionItemDetail(n){var i="Cid",t,r,u;n.context?(n=$(n.context),t=n.data("videoIndex")+1):t=n.index()+1;r=n.data("action"+i);u=n.siblings().length+1;saveDataLayer(20,null,"Collection item detail",r,"{0}/{1} {2}".format(t,u,n.data("label"+i)))}function slickNextClick(n,t,i){var f=16,e="Collection item preview",u,o,r;for(i?(e="Collection item detail",f=20):i="Cip",u=n.find("div.slick-active"),o=n.find(".slick-dots li").length,r=0;r<u.length;r++){var s=u[r],c=n.find(".slick-dots li.slick-active").index()+1,h=s.datasetCompatible()["action"+i];t&&(h+=t);saveDataLayer(f,null,e,h,"{0}/{1} {2}".format(c,o,s.datasetCompatible()["label"+i]))}}function tabNextClick(n,t,i){var r="Cip",f=n.length,e=n.index(t)+1,u=$(t).data("action"+r);i&&(u+=i);saveDataLayer(16,null,"Collection item preview",u,"{0}/{1} {2}".format(e,f,$(t).data("label"+r)))}function collectionItemPreviewClick(n){var t=n;n.currentTarget&&(t=$(n.currentTarget));var i="Cip",r=t.index()+1,u=t.siblings().length+1;saveDataLayer(16,null,"Collection item preview",t.data("action"+i),"{0}/{1} {2}".format(r,u,t.data("label"+i)))}function downloadClick(n){var t=$(n.currentTarget),i={"document.Type":t.data("fileType")},r=null;t.data("contextModelcode")&&(r=t);i=gtmEnrichModelData(i,r);saveDataLayer(8,i,"All pages","Download",t.attr("href"))}function gtmSubmitForm(n,t,i){var r,f=n.closest("[data-implementation='ImporterFormsModule']").find("[data-form-code]").data("formCode"),e=n.data("formName")?n.data("formName"):f,o,u;e&&(t?(o=Object.keys(t).map(function(n){return t[n]+" ("+n+")"}).join(", "),r="Submit - Error - "+o):r="Submit - "+e,u=null,i&&(u={"form.SubmissionID":i}),saveDataLayer(26,u,"Forms",f,r))}function orientationChanged(n,t){if(n){var i={"page.ResponsiveLayout":findBootstrapEnvironment(),"page.Orientation":t};saveDataLayer(6,i,"All pages","Orientation change",t,null,!0)}}function quickResultsClick(n,t,i){searchGtm(11,"Quick results click","{0}/{1} {2}".format(t,i,n))}function searchIconClick(){searchGtm(12,"Search icon","Search icon click")}function showResultsGtm(n){searchGtm(13,"Search Page","Show results: "+n)}function orderResultsGtm(n){searchGtm(14,"Search Page","Order By: "+n)}function searchGtm(n,t,i){saveDataLayer(n,null,"Search",t,i)}function gtmEnrichModelData(n,t){return n||(n=[]),$("div[data-implementation='ImporterModelDerivativePage']").length&&!t&&(t=$(".k2ng-page")),t&&(n["car.Model"]=""+t.data("contextModelcode")+"",n["car.ModelBody"]=""+t.data("contextMbv")+"",n["car.Carline"]=""+t.data("contextCarline")+""),n}function saveDataLayer(n,t,i,r,u,f,e){var s=["ImporterExternalContentChromeFullFatPage","ImporterExternalContentChromeFullFatSecuredPage","ImporterExternalContentChromePage","ImporterExternalContentChromeSecuredPage","DealerChromeLayoutPage","DealerHubChromeLayoutPage"],o={matrixId:n+"","page.Context":$(".k2ng-page").data("siteType")},h;i&&(o.eventCategory=stripHtml(i),o.eventAction=stripHtml(r),o.eventLabel=stripHtml(u));f&&(o.eventVaue=stripHtml(f));e&&(o.eventNonInteraction=e);t&&(o=$.extend(o,t));o.event||(o.event="trackEvent");t&&t.matrixId||(o.matrixId=n+"");h=function(){for(var t,n=0;n<s.length;n++)if(t=s[n],$(document).find("div[data-implementation='"+t+"']").length>0)return!0;return!1};h()&&$.inArray(n,[1,6,4])>=0||($.active===0?(dataLayer.push(o),console.log(o)):gtmTracking.itemsToTrack.push(o))}function stripHtml(n){return jQuery("<p>"+n+"<\/p>").text()}var nLayerData=0,gtmTracking=function(){"use strict";function n(n,t,i,r,u,f,e,o,s){var h=n,a,l,c;typeof n=="function"&&(h=n());gtmTracking.saveDataLayer(i,r,u,f,e,o,s);a=300;typeof gtmTrackDelay=="number"&&(a=gtmTrackDelay);setTimeout(function(){t?open(h,"_blank"):document.location.href=h},a);l=document.createElement("link");l.href=h;l.rel="prefetch";document.head.appendChild(l);c=document.createElement("link");c.href=h;c.rel="preload";c.as="document";document.head.appendChild(c)}function t(t){var u;t.preventDefault();var f=$(t.target).attr("target"),o=typeof f=="string"&&f==="_blank",e="Cta",i=t.currentTarget,r=i.datasetCompatible()["label"+e];r||(r=$.trim(t.currentTarget.text));u=null;$(i).hasClass("layer-link")||(u=$(i).attr("href"));n(u,o,17,[],"CTA",i.datasetCompatible()["action"+e],r,null,null)}return{screenMobileMax:660,screenTabletMax:1e3,homeTilesNotTrackedPages:["ImporterEventDetailPage","ImporterHistoryPage","ImporterCompanyPage","ImporterFleetPage"],_isLoadedTracked:!1,isLoadedTracked:function(n){return n!==undefined&&(this._isLoadedTracked=n),this._isLoadedTracked},layerLoaded:function(n){var t=n.find("[data-action-cid]")[0];t&&collectionItemDetail($(t))},itemsToTrack:[],loadVimeoTitle:function(n,t){$.ajax({url:"https://vimeo.com/api/v2/video/"+t+".json",context:document.body}).success(function(t){var i=$(n).hasClass("gtm-cip-video")?"labelCip":"labelCid";$(n).data(i,t[0].title)})},formError:function(n,t){var r;if(t||(n=$(n.target).closest("form"),t=n.find("[id*='error']:visible")),t.length>0||!n.valid()){var u=$(n).find("input[name='Code']").val(),f=n.data("formName")?n.data("formName"):u,e=n.find("[type='submit']").val(),i=[];$.each(t,function(t,r){r=$(r);var u=r.attr("id").substr(0,r.attr("id").indexOf("-")),f=n.find("[for="+u+"]").text();i.push({text:r.text(),field:f})});r="Error - {0} - {1}".format(e,$.map(i,function(n){return n.text+" ("+n.field+")"}).join(", "));saveDataLayer(24,null,"Forms",f,r)}},focusFormElement:function(n){var i=$(n.currentTarget),r,t;i&&(r=$(i.parents("form")[0]).find("input[name='Code']").val(),t=i.attr("name"),t||(t=i.find("input").attr("name")),t&&saveDataLayer(25,null,"Forms",r,"Focus - "+t))},isHomeTileDeniedToTrack:function(n){return n=$(n),$.inArray(n.closest(".k2ng-page[data-implementation]").data("implementation"),gtmTracking.homeTilesNotTrackedPages)>=0&&n.closest(".k2ng-module[data-implementation]").data("implementation")==="ImporterHomeTilesModule"?!0:!1},containsAsyncPromos:function(){return $(".gtm-promotion-async").length>0},registerEventClickHomeTilePromotion:function(n){gtmTracking.isHomeTileDeniedToTrack(n)||(n.addEventListener?n.addEventListener("click",promotionClick,!1):n.attachEvent("onclick",promotionClick,!1))},registerEventClickPromotion:function(n){gtmTracking.isHomeTileDeniedToTrack(n)||(n.addEventListener?n.addEventListener("click",promotionClick,!1):n.attachEvent("onclick",promotionClick,!1),$(n).addClass("gtm-promotion-click-bound"))},getPromoImpressions:function(){var n=[];return $.each($(".gtm-promotion:visible, .promotion-list-item"),function(t,i){$(i).is(".slick-cloned *")||n.push(i)}),n},registerEventClickDownload:function(n){if(n.hasOwnProperty("length"))for(var t=0;t<n.length;t++)gtmTracking.registerEventClickDownloadHelper(n[t]);else gtmTracking.registerEventClickDownloadHelper(n)},registerEventClickDownloadHelper:function(n){n.addEventListener?n.addEventListener("click",downloadClick,!1):n.attachEvent("onclick",downloadClick,!1)},cookieNoticeClick:function(n){saveDataLayer(10,null,"Cookie Notice","Click",n)},cookieNoticeDisplay:function(){saveDataLayer(9,null,"Cookie Notice","Display","Cookie notice display")},saveDataLayer:function(n,t,i,r,u,f,e){saveDataLayer(n,t,i,r,u,f,e)},saveDataLayerWithDelayedRedirection:n,ctaDelayedClickCallback:t}}();$(function(){"use strict";var t,n,i,r;$.each($(".hometile"),function(n,t){t=$(t);var i;i=window.innerWidth<gtmTracking.screenMobileMax?"tileMobileNo":window.innerWidth<gtmTracking.screenTabletMax?"tileTabletNo":"tileNo";t.find(".tile-content").attr("data-position-promo","HomeTiles_"+t.data(i))});$.each($(".gtm-cta-link"),function(n,t){var i=$(t).hasClass("gtm-click-delayed")?gtmTracking.ctaDelayedClickCallback:ctaClick;t.addEventListener?t.addEventListener("click",i,!1):t.attachEvent("onclick",i,!1)});$.each($(".gtm-hometile"),function(n,t){gtmTracking.registerEventClickHomeTilePromotion(t)});$.each($(".gtm-promotion:not(.gtm-promotion-async):not(.gtm-promotion-click-bound)"),function(n,t){gtmTracking.registerEventClickPromotion(t)});$.each($(".gtm-download"),function(n,t){gtmTracking.registerEventClickDownload(t)});$.each($(".gtm-download"),function(n,t){t.addEventListener?t.addEventListener("click",downloadClick,!1):t.attachEvent("onclick",downloadClick,!1)});$.each($(".gtm-cip-video, .gtm-cid-vimeo"),function(n,t){$(t).hasClass("gtm-cip-video")&&(t.addEventListener?t.addEventListener("click",collectionItemPreviewClick,!1):t.attachEvent("onclick",collectionItemPreviewClick,!1),gtmTracking.loadVimeoTitle(t,t.datasetCompatible().video))});$(".gtm-promotion").length!==0||$("[data-implementation='ImporterSearchResultsPage']").length!==0||$("div[data-implementation='ImporterModelDerivativePage']").length?gtmTracking.containsAsyncPromos()||gtmTracking.isLoadedTracked(promotionImpressions()):(gtmPageView(),gtmTracking.isLoadedTracked(!0));$("div[data-implementation='ImporterModelDerivativePage']").length&&(t=createPageViewData(),n={"web.ModelDetailViews":"1"},jQuery.extend(n,t),saveDataLayer(22,n));$.each($(".k2ng-module-ImporterFormsModule input, .k2ng-module-ImporterFormsModule select, .k2ng-module-ImporterFormsModule textarea, .k2ng-module-ImporterFormsModule .checkbox, .k2ng-module-ImporterFormsModule .radio"),function(n,t){t.addEventListener?t.addEventListener("focus",gtmTracking.focusFormElement,!1):t.attachEvent("onfocus",gtmTracking.focusFormElement,!1);$(t).find("input").length>0&&$(t).attr("tabindex",-1)});$.each($(".k2ng-module-ImporterFormsModule [type='submit']"),function(n,t){t.addEventListener?t.addEventListener("click",gtmTracking.formError,!1):t.attachEvent("onclick",gtmTracking.formError,!1)});$.each($(".sa-mobile-serach-input-container .do-mobile-search"),function(n,t){t.addEventListener?t.addEventListener("focus",searchIconClick,!1):t.attachEvent("onfocus",searchIconClick,!1)});i=window.matchMedia("(orientation: landscape)");i.addListener(function(n){orientationChanged(n.matches,"Landscape")});r=window.matchMedia("(orientation: portrait)");r.addListener(function(n){orientationChanged(n.matches,"Portrait")});jQuery.scrollDepth({userTiming:!1,pixelDepth:!1,eventHandler:function(n){var i=$(".k2ng-page").data("implementation"),t;jQuery.inArray(i,["ImporterAllNewsPage","ImporterAwardsPage","ImporterAllEventsPage","ImporterAllPromotionsPage","ImporterAllSearchResultsModule"])===-1&&(t={"page.ScrollDepth":n.eventLabel},saveDataLayer(4,t,"All pages","Scroll down","Scroll depth: "+n.eventLabel))}})});$(document).ajaxStop(function(){var i=!1,n,t;for(gtmTracking.isLoadedTracked()||(i=promotionImpressions(),i||gtmTracking.isLoadedTracked()||gtmPageView(),gtmTracking.isLoadedTracked(!0)),n=0;n<gtmTracking.itemsToTrack.length;n++)t=gtmTracking.itemsToTrack[n],i&&t.event==="pageview"||(dataLayer.push(t),console.log(t));gtmTracking.itemsToTrack=[];$.each($(".gtm-hometile"),function(n,t){gtmTracking.registerEventClickHomeTilePromotion(t)});$.each($(".gtm-promotion:not(.gtm-promotion-click-bound)"),function(n,t){gtmTracking.registerEventClickPromotion(t)})});
//# 